### 事件循环
1. 事件循环是浏览器执行任务的机制，它会不断循环判断消息队列中是否有任务。
2. 消息队列中的任务都是指宏任务，而宏任务中包含微任务队列。为了协调这些宏任务有条不紊地在主线程上执行，页面进程引入了消息队列和事件循环机制，渲染进程内部会维护多个消息队列，比如延迟执行队列和普通的消息队列。然后主线程采用一个 for 循环，不断地从这些任务队列中取出任务并执行任务。
3. 一个宏任务的结束，指的是其所有的微任务执行完成。

### 消息队列
1. 符合“先进先出”的特点。从头部取出任务，从尾部加入任务。
2. 队列中存放的都是任务：宏任务或微任务。

### 宏任务
- 渲染事件（如解析 DOM、计算布局、绘制）；
- 用户交互事件（如鼠标点击、滚动页面、放大缩小等）；
- JavaScript 脚本执行事件；
- 网络请求完成、文件读写完成事件。

### 微任务
1. 微任务就是一个需要异步执行的函数，执行时机是在主函数执行结束之后、当前宏任务结束之前。
2. 微任务和宏任务是绑定的，每个宏任务在执行时，会创建自己的微任务队列。
3. 微任务的执行时长会影响到当前宏任务的时长。
4. 在一个宏任务中，分别创建一个用于回调的宏任务和微任务，无论什么情况下，微任务都早于宏任务执行。

### 相关资料
1. 李兵老师的《浏览器工作原理与实践》
2. ECMAScript文档：RunJobs（P.104）